<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Live traffic system &mdash; BFMC - Competition Documentation  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="canonical" href="https://boschfuturemobility.com/data/vehicletoeverything/livetraffic.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="V2V - Vehicle to vehicle communication" href="vehicletovehicle.html" />
    <link rel="prev" title="Semaphore" href="semaphore.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> BFMC - Competition Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../connectiondiagram.html">Connection diagram and components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../connectiondiagram/components.html">Components list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connectiondiagram/printedcomponents.html">Printed components - 3D</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connectiondiagram/powerboard.html">Powerboard</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../racetrack.html">Race track</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../racetrack/groundmarkings.html">Ground markings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../racetrack/trafficsigns.html">Traffic signs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../racetrack/otherelements.html">Other elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../racetrack/positioning.html">Positioning on track</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../vehicletoeverything.html">V2X - Vehicle to everything</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="localizationsysandmap.html">Localization system and mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="semaphore.html">Semaphore</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Live traffic system</a></li>
<li class="toctree-l2"><a class="reference internal" href="vehicletovehicle.html">V2V - Vehicle to vehicle communication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../embeddedplatform.html">Embedded platform</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../embeddedplatform/toolsfordevelopment.html">Tools for development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../embeddedplatform/debugging.html">Debugging the code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../brain.html">Brain project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../brain/pythonmultiprocessing.html">Python and multiprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../brain/rosversion.html">ROS setup and packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../brain/roswithsimulator.html">ROS with simulator data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../computer.html">Computer projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../computer/setup.html">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../computer/testing.html">Simulated servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../computer/demo.html">Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../computer/dashboard.html">Dashboard</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../simulator.html">Simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../useful.html">Useful</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../useful/usageraspberryclassic.html">Usage of rasbery pi - Classical approach</a></li>
<li class="toctree-l2"><a class="reference internal" href="../useful/usageRaspberryFast.html">Usage of rasbery pi - Fast approach</a></li>
<li class="toctree-l2"><a class="reference internal" href="../useful/ROS.html">Robot Operating System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../useful/coding.html">Coding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../useful/hardwareimprovements.html">Hardware improvements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../useful/materials.html">Aditional materials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../periodicstatus.html">Periodic status and examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">BFMC - Competition Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../vehicletoeverything.html">V2X - Vehicle to everything</a></li>
      <li class="breadcrumb-item active">Live traffic system</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ECC-BFMC/Documentation/blob/master/source/data/vehicletoeverything/livetraffic.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="live-traffic-system">
<h1>Live traffic system<a class="headerlink" href="#live-traffic-system" title="Permalink to this heading"></a></h1>
<p>An live traffic server will be available at the location. The car will have to send to it the position (with 0.5 meter radius error) the position and
the id of the encountered obstacle. Down below, you can see the table with the id and description of the obstacles.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>TS - Stop</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>TS - Priority</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>TS - Parking</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>TS - Crosswalk</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>TS - Highway entrance</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>TS - Highway exit</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>TS - Roundabout</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>TS - One way road</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>Traffic light</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>Static car on road</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>Static car on parking</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>Pedestrian on crowwalk</p></td>
</tr>
<tr class="row-even"><td><p>13</p></td>
<td><p>Pedetrian on road</p></td>
</tr>
<tr class="row-odd"><td><p>14</p></td>
<td><p>Roadblock</p></td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td><p>Bumpy road</p></td>
</tr>
</tbody>
</table>
<p>TS - Traffic Sign</p>
<section id="to-run">
<h2>To run<a class="headerlink" href="#to-run" title="Permalink to this heading"></a></h2>
<p>The API is listening for the server on the LAN. It validates the server and then requests to connect to it with the car given ID. The server validates the car ID
with it’s key and validates the connection. The client then sends the coordinates and the ID’s of the encountered obstacles via the given function.
It uses the src/data/obstaclehandler/environment.py. script to intercept all the data.</p>
<p>The simulated server can be found here: test/environmentalSERVER/env.py.</p>
<ul>
<li><p>The server saves the received data under test/environmentalSERVER/savings</p></li>
<li><p>For tesing purposes, publickey_server_test.pem should be used (file src/data/obstaclehandler/server_subscriber.py line 57)</p></li>
<li><p>For the competition, publickey_server.pem should be used (file test/obstaclehandler/server_subscriber.py line 56)</p></li>
<li><p>For the competition, a pair of privatekey_client.pem and publickey_client.pem will have to be generated. The publickey_client will have to be sent to the organizers
via the communicated channel. The privatekey should be saved locally and used (file test/obstaclehandler/server_subscriber.py line 59)</p>
<p>// generate a private key with the correct length</p>
<p><code class="docutils literal notranslate"><span class="pre">openssl</span> <span class="pre">genrsa</span> <span class="pre">-out</span> <span class="pre">private-key.pem</span> <span class="pre">2048</span></code></p>
<p>// generate corresponding public key</p>
<p><code class="docutils literal notranslate"><span class="pre">openssl</span> <span class="pre">rsa</span> <span class="pre">-in</span> <span class="pre">private-key.pem</span> <span class="pre">-pubout</span> <span class="pre">-out</span> <span class="pre">public-key.pem</span></code></p>
</li>
</ul>
</section>
<section id="id1">
<h2>Live traffic system<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h2>
<p>livetraffic is a module designed so that the clients/cars can send the coordinates of obstacles to the server, which, this way, can monitor
the traffic conditions on the track.
The server streams it’s TCP port on the broadcast port (23456). The client then tries to connect to the server on the communicated TCP port, by sending it’s
own ID and the ID crypted with the car PrivateKey. The server decrypts the car encrypted message with corresponding public key. If the ID’s match, that means
that the client is validated by the server. The server then replies with a plain and an encrypted message with it’s own private key. The client decrypts the
encrypted message with the server public key and checks that the messages are the same. If the messages are the same, the server is validated by the client
and the connection is initiated. The server then serves the client by listening to the ID’s and obstacles it will send.</p>
<p>This simulates a real life automatic traffic monitor, which updates itself by using the data from the connected devices.</p>
<p>More details on the connection itself can be found in the src/data/environmentalserver/server_subscriber.py</p>
<p>The information can be used by the team as a validation that the car is detecting the obstacles.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="semaphore.html" class="btn btn-neutral float-left" title="Semaphore" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="vehicletovehicle.html" class="btn btn-neutral float-right" title="V2V - Vehicle to vehicle communication" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Bosch Engineering Center Cluj and BFMC organizers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>